<!DOCTYPE html>
<html lang="en">
  <head>
    <title>SwiftEdDSA  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>
    <a title="SwiftEdDSA  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">SwiftEdDSA Docs</a> (100% documented)</p>
        <div class="header-right">
          <form role="search" action="search.json">
            <input type="text" placeholder="Search documentation" data-typeahead>
          </form>
        </div>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">SwiftEdDSA Reference</a>
        <img id="carat" src="img/carat.png" alt=""/>
        SwiftEdDSA  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/Base64.html">Base64</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Ed.html">Ed</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Ed/Ex.html">– Ex</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Ed/Kind.html">– Kind</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/PrivateKey.html">PrivateKey</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/PublicKey.html">PublicKey</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Typealiases.html">Type Aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:10SwiftEdDSA4Bytea">Byte</a>
              </li>
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:10SwiftEdDSA5Bytesa">Bytes</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <h2><b>SwiftEdDSA</b></h2>

<h3><b>Contents:</b></h3>

<ul>
<li><a href="#use">Usage</a></li>
<li><a href="#newkeys">Creating New Keys</a></li>
<li><a href="#load">Loading Existing Keys</a></li>
<li><a href="#sign">Sign and Verify</a></li>
<li><a href="#comp">CryptoKit Compatibility</a></li>
<li><a href="#perf">Performance</a></li>
<li><a href="#dep">Dependencies</a></li>
<li><a href="#ref">References</a></li>
</ul>

<p>SwiftEdDSA implements the EdDSA digital signature algorithm as defined in RFC 8032.
It is based on the Edwards 25519 and Edwards 448 elliptic curves.
SwiftEdDSA has functionality to create public and private keys, to sign messages, and to verify signatures.</p>

<h2 id="use"><b>Usage</b></h2>

<p>In your project Package.swift file add a dependency like<br/></p>
<pre class="highlight plaintext"><code>  dependencies: [
  .package(url: "https://github.com/leif-ibsen/SwiftEdDSA", from: "2.3.0"),
  ]
</code></pre>

<h2 id="newkeys"><b>Creating New Keys</b></h2>

<h3><b>To create a new private key instance</b></h3>
<pre class="highlight plaintext"><code>// Curve Ed25519
let privKey = PrivateKey(kind: .ed25519)

// Curve Ed448
let privKey = PrivateKey(kind: .ed448)
</code></pre>

<h3><b>To create a new key pair</b></h3>
<pre class="highlight plaintext"><code>// Curve Ed25519 key pair
let (pubKey, privKey) = Ed.makeKeyPair(kind: .ed25519)

// Curve Ed448 key pair
let (pubKey, privKey) = Ed.makeKeyPair(kind: .ed448)
</code></pre>

<h2 id="load"><b>Loading Existing Keys</b></h2>

<h3><b>To load keys from their PEM encoding</b></h3>
<pre class="highlight plaintext"><code>let pubPEM =
"""
-----BEGIN PUBLIC KEY-----
MCowBQYDK2VwAyEA59XU+uLDn3fVTDfLZXJnITqbYoPwxSjfUehk8/E9stI=
-----END PUBLIC KEY-----
"""
let privPEM =
"""
-----BEGIN PRIVATE KEY-----
MC4CAQAwBQYDK2VwBCIEIHZN8jGTAPTSZoZO9PWDhTgRDrO5Q6cW1IWCxcsmoZ7X
-----END PRIVATE KEY-----
"""

let pub = try PublicKey(pem: pubPEM)
let priv = try PrivateKey(pem: privPEM)

print(pub)
print(priv)
</code></pre>

<p>giving:</p>
<pre class="highlight plaintext"><code>Sequence (2):
  Sequence (1):
    Object Identifier: 1.3.101.112
  Bit String (256): 11100111 11010101 11010100 11111010 11100010 11000011 10011111 01110111 11010101 01001100 00110111 11001011 01100101 01110010 01100111 00100001 00111010 10011011 01100010 10000011 11110000 11000101 00101000 11011111 01010001 11101000 01100100 11110011 11110001 00111101 10110010 11010010

Sequence (3):
  Integer: 0
  Sequence (1):
    Object Identifier: 1.3.101.112
  Octet String (34): 04 20 76 4d f2 31 93 00 f4 d2 66 86 4e f4 f5 83 85 38 11 0e b3 b9 43 a7 16 d4 85 82 c5 cb 26 a1 9e d7
</code></pre>

<h3><b>To create a public key corresponding to a private key</b></h3>
<pre class="highlight plaintext"><code>let pubKey = PublicKey(privateKey: privKey)
</code></pre>

<h2 id="sign"><b>Sign and Verify</b></h2>

<h3><b>To sign and verify a message</b></h3>
<pre class="highlight plaintext"><code>let pubPEM =
"""
-----BEGIN PUBLIC KEY-----
MCowBQYDK2VwAyEA59XU+uLDn3fVTDfLZXJnITqbYoPwxSjfUehk8/E9stI=
-----END PUBLIC KEY-----
"""
let privPEM =
"""
-----BEGIN PRIVATE KEY-----
MC4CAQAwBQYDK2VwBCIEIHZN8jGTAPTSZoZO9PWDhTgRDrO5Q6cW1IWCxcsmoZ7X
-----END PRIVATE KEY-----
"""

let pubKey = try PublicKey(pem: pubPEM)
let privKey = try PrivateKey(pem: privPEM)

let msg = Bytes("Hi, there".utf8)
let sig = try privKey.sign(message: msg)
print("Verified:", pubKey.verify(signature: sig, message: msg))
</code></pre>

<p>giving:</p>
<pre class="highlight plaintext"><code>Verified: true
</code></pre>

<h2 id="comp"><b>Compatibility with Apple&rsquo;s CryptoKit Framework</b></h2>

<p>SwiftEdDSA keys of kind <em>.ed25519</em> corresponds to CryptoKit&rsquo;s <em>Curve25519</em> keys.
Keys of kind <em>.ed448</em> is not supported in CryptoKit.</p>

<p>To convert SwiftEdDSA keys - say <em>edPriv</em> and <em>edPub</em> to corresponding CryptoKit keys:</p>
<pre class="highlight plaintext"><code>let ckPriv = try CryptoKit.Curve25519.Signing.PrivateKey(rawRepresentation: edPriv.s)
let ckPub = try CryptoKit.Curve25519.Signing.PublicKey(rawRepresentation: edPub.r)
</code></pre>

<p>To convert CryptoKit keys - say <em>ckPriv</em> and <em>ckPub</em> to corresponding SwiftEdDSA keys:</p>
<pre class="highlight plaintext"><code>let edPriv = try PrivateKey(s: Bytes(ckPriv.rawRepresentation))
let edPub = try PublicKey(r: Bytes(ckPub.rawRepresentation))
</code></pre>

<h2 id="perf"><b>Performance</b></h2>

<p>The signature generation and verification time for a short message and the time it takes to
generate a new private key and to generate a public key from its private key
was measured on an iMac 2021, Apple M1 chip. The results are shown below:</p>

<table width="80%">
<tr><th align="left" width="34%">Operation</th><th align="right" width="33%">Ed25519</th><th align="right" width="33%">Ed448</th></tr>
<tr><td>Sign</td><td align="right">0.8 mSec</td><td align="right">2.1 mSec</td></tr>
<tr><td>Verify</td><td align="right">1.1 mSec</td><td align="right">3.0 mSec</td></tr>
<tr><td>Public Key Generation</td><td align="right">2.8 mSec</td><td align="right">6.6 mSec</td></tr>
<tr><td>Private Key Generation</td><td align="right">0.67 uSec</td><td align="right">0.61 uSec</td></tr>
</table>

<p>The public key constructor computes and caches information that subsequently speed-up signature verification.
If the same public key is to be used for many signature verifications, it is more efficient to use the same key instance for all verifications,
rather than generate a new instance for each verification.</p>

<h2 id="dep"><b>Dependencies</b></h2>

<p>SwiftEdDSA requires Swift 5.0.</p>

<p>The SwiftEdDSA package depends on the ASN1 and BigInt packages</p>
<pre class="highlight plaintext"><code>dependencies: [
    .package(url: "https://github.com/leif-ibsen/ASN1", from: "2.2.0"),
    .package(url: "https://github.com/leif-ibsen/BigInt", from: "1.14.0"),
],
</code></pre>

<h2 id="ref"><b>References</b></h2>

<p>Algorithms from the following books and papers have been used in the implementation.
There are references in the source code where appropriate.</p>

<ul>
<li>[GUIDE] - Hankerson, Menezes, Vanstone: Guide to Elliptic Curve Cryptography. Springer 2004</li>
<li>[RFC-8032] - Edwards-Curve Digital Signature Algorithm (EdDSA), January 2017</li>
</ul>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2023 <a class="link" href="" target="_blank" rel="external noopener"></a>. All rights reserved. (Last updated: 2023-11-02)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external noopener">jazzy ♪♫ v0.14.3</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external noopener">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</html>
